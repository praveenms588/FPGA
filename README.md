# Serial Communication & Timer Design on Nexys A7 FPGA

## üìå Project Overview
This project implements **Serial Communication (UART)** and a **Timer** on the **Xilinx Nexys A7 FPGA** using **Vivado** and Verilog HDL.  
The design sends a predefined **binary sequence** at fixed time intervals generated by the timer.

---

## üõ† Features
- **UART (Serial Communication)**
  - Implements asynchronous communication
  - Baud rate: 9600 bps (configurable)
  - 8-bit frame format (data bits only, no parity)
  - Includes transmit (TX) and receive (RX) modules
- **Timer**
  - 1-second periodic pulse generation (adjustable)
  - Pulse triggers UART transmission
- **Binary Sequence Transmission**
  - Sends a fixed binary pattern (e.g., `10101011`)
  - Easily changeable in source code

---

## üìÇ Project Structure (with Explanation)

```
/src
‚îú‚îÄ‚îÄ uart_tx.v       # UART transmitter: converts parallel 8-bit binary data into serial format for transmission
‚îú‚îÄ‚îÄ uart_rx.v       # UART receiver: converts incoming serial data back into parallel 8-bit binary data
‚îú‚îÄ‚îÄ baud_gen.v      # Baud rate generator: divides 100 MHz FPGA clock to produce the baud rate clock (e.g., 9600 Hz)
‚îú‚îÄ‚îÄ timer.v         # Timer logic: counts FPGA clock cycles to generate a 1-second interval trigger
‚îú‚îÄ‚îÄ top_module.v    # Integrates UART TX, optional RX, baud generator, and timer to send binary sequence every second

/sim
‚îú‚îÄ‚îÄ uart_tb.v       # Testbench for UART TX/RX modules: verifies correct serial encoding/decoding
‚îú‚îÄ‚îÄ timer_tb.v      # Testbench for timer: checks if a 1-second pulse is generated correctly
‚îú‚îÄ‚îÄ top_tb.v        # System-level testbench: ensures binary sequence is sent every second via UART

/constraints
‚îú‚îÄ‚îÄ nexys_a7.xdc    # Pin mapping for Nexys A7: assigns physical FPGA pins to logical ports (clk, uart_tx, uart_rx)
```

---

## ‚öôÔ∏è Hardware Requirements
- **FPGA Board**: Digilent Nexys A7 (Artix-7 XC7A100T or XC7A35T)
- **Onboard USB-to-UART connection**: FTDI chip allows PC-FPGA communication
- **Vivado Design Suite (2020.1 or later)** for synthesis and simulation
- **USB cable** for JTAG programming

---

## üìú Constraints File Setup (`nexys_a7.xdc`)
This file tells Vivado which FPGA pins are used for each signal.

```xdc
## Clock input (100 MHz onboard oscillator)
set_property PACKAGE_PIN W5 [get_ports clk]
set_property IOSTANDARD LVCMOS33 [get_ports clk]

## UART TX (FPGA ‚Üí PC)
set_property PACKAGE_PIN U19 [get_ports uart_tx]
set_property IOSTANDARD LVCMOS33 [get_ports uart_tx]

## UART RX (PC ‚Üí FPGA)
set_property PACKAGE_PIN U18 [get_ports uart_rx]
set_property IOSTANDARD LVCMOS33 [get_ports uart_rx]
```

---

## üñ•Ô∏è UART Configuration

| Parameter | Value    | Explanation                         |
| --------- | -------- | ----------------------------------- |
| Baud Rate | 9600 bps | Standard speed for serial terminals |
| Data Bits | 8        | 1 byte per frame                    |
| Stop Bits | 1        | Marks end of each frame             |
| Parity    | None     | No error-checking bit used          |

---

## üß© Timer Configuration

- **Input clock:** 100 MHz (from Nexys A7 oscillator)
- **Prescaler:** Divides down to **1 Hz**
- **Trigger pulse:** High for 1 clock cycle every second
- **Purpose:** Starts UART transmission of binary sequence

---

## üîß Module-by-Module Design Explanation

### 1. **Baud Rate Generator (`baud_gen.v`)**
- **Purpose**: Converts the 100 MHz FPGA clock to the UART communication speed
- **Logic**: Uses a counter to divide the clock frequency
- **Formula**: `Counter_Max = Clock_Frequency / (Baud_Rate √ó 16)`
- **Output**: Provides timing signals for UART TX/RX modules

### 2. **UART Transmitter (`uart_tx.v`)**
- **Purpose**: Serializes 8-bit parallel data for transmission
- **State Machine**: 
  - IDLE: Waits for data to transmit
  - START: Sends start bit (logic 0)
  - DATA: Transmits 8 data bits (LSB first)
  - STOP: Sends stop bit (logic 1)
- **Input**: Parallel 8-bit data and trigger signal
- **Output**: Serial data stream (uart_tx pin)

### 3. **UART Receiver (`uart_rx.v`)**
- **Purpose**: Converts incoming serial data back to parallel format
- **Sampling**: Oversamples incoming data at 16√ó baud rate for accuracy
- **State Machine**:
  - IDLE: Monitors for start bit
  - START: Confirms start bit validity
  - DATA: Captures 8 data bits
  - STOP: Validates stop bit
- **Output**: 8-bit parallel data and data_ready flag

### 4. **Timer Module (`timer.v`)**
- **Purpose**: Generates precise 1-second interval pulses
- **Counter Logic**: Counts 100,000,000 clock cycles (1 second at 100 MHz)
- **Output**: Single-cycle pulse every second
- **Reset**: Counter resets after reaching maximum value

### 5. **Top Module (`top_module.v`)**
- **Purpose**: System integration and control logic
- **Functionality**:
  - Instantiates all sub-modules
  - Stores the binary sequence to transmit
  - Coordinates transmission on timer pulse
  - Manages data flow between modules

---

## ‚ñ∂Ô∏è Simulation Steps

1. **Open Vivado** and create a new project.
2. **Add Verilog source files** from `/src`.
3. **Add testbench files** from `/sim`.
4. Run **behavioral simulation**.
5. Verify that:
   - Timer outputs a pulse every 1 second (simulated).
   - UART sends the binary sequence on each pulse.

---

## üöÄ FPGA Deployment

1. Open the Vivado project.
2. Add the **Nexys A7 constraints file**.
3. **Synthesize**, **implement**, and **generate the bitstream**.
4. Connect the Nexys A7 board via USB.
5. Program the FPGA with the bitstream.
6. Open a **serial terminal** (PuTTY, Tera Term, etc.):
   - Port: COMx (from FTDI device)
   - Baud rate: 9600
   - Data bits: 8
   - Stop bits: 1
   - Parity: None
7. Observe periodic binary sequence output.

---

## üìà Expected Output

- Every **1 second**, the FPGA sends a binary sequence (e.g., `10101011`) over UART.
- On a **logic analyzer**, waveforms match the UART protocol for the given binary pattern.
- On a **serial terminal**, output may appear as ASCII characters corresponding to the binary value.

---

## üîß Modifying the Binary Sequence

The binary sequence is stored in the **`top_module.v`** file:

```verilog
reg [7:0] data_to_send = 8'b10101011;  // Change this to modify sequence
```

Recompile and reprogram the FPGA to update the transmitted pattern.

---

## üõ†Ô∏è Troubleshooting

### Common Issues:
1. **No output on terminal**: Check COM port settings and cable connections
2. **Garbled data**: Verify baud rate matches in both FPGA and terminal
3. **Timing issues**: Ensure constraints file is properly applied
4. **Synthesis errors**: Check Verilog syntax and module instantiations

### Debug Tips:
- Use Vivado's integrated logic analyzer (ILA) for real-time debugging
- Verify timing constraints are met after implementation
- Check resource utilization report for potential issues

---

## üìö Learning Outcomes

After completing this project, you will understand:
- UART communication protocol implementation
- Clock domain management in FPGA designs
- State machine design in Verilog
- FPGA design flow: simulation ‚Üí synthesis ‚Üí implementation
- Hardware-software interfacing through serial communication

---

## üîó References

- [Nexys A7 Reference Manual](https://digilent.com/reference/programmable-logic/nexys-a7/reference-manual)
- [Vivado Design Suite User Guide](https://docs.xilinx.com/v/u/en-US/ug910-vivado-getting-started)
- [UART Protocol Specification](https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter)

---

## üìù License

This project is for educational purposes and may be modified for learning or research.

---

**Author:** Your Name  
**Date:** 2024-XX-XX  
**Version:** 1.0
